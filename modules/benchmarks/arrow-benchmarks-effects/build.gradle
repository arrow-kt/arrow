
dependencies {
    compile project(":arrow-effects-data")
    compile project(":arrow-effects-extensions")
    compile project(":arrow-effects-io-extensions")
    compile project(":arrow-effects-rx2-extensions")
    compile "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlinVersion"
    compile "org.jetbrains.kotlinx:kotlinx-coroutines-core:$kotlinxCoroutinesVersion"
}

apply plugin: "me.champeau.gradle.jmh"
apply plugin: "io.morethan.jmhreport"

jmh {
    include = [
            'arrow.benchmarks.effects.Pure',
            'arrow.benchmarks.effects.Delay',
            'arrow.benchmarks.effects.Async',
            'arrow.benchmarks.effects.HandleNonRaised',
            'arrow.benchmarks.effects.HandleRaisedError'
    ]
    resultFormat = 'json'
    resultsFile = file('build/reports/benchmarks.json')
    timeOnIteration = '1s'
    if (project.hasProperty("jmhInclude"))
        include = [jmhInclude]
    if (project.hasProperty("jmhResultsFile"))
        resultsFile = file(jmhResultsFile)
}

jmhReport {
    jmhResultPath = project.file('build/reports/benchmarks.json')
    jmhReportOutput = project.file('build/reports')
}

tasks.jmh.finalizedBy tasks.jmhReport